{
 "cells": [
  {
   "cell_type": "markdown",
   "id": "f50060fc-9065-4bdf-b920-4cfc77909a7a",
   "metadata": {},
   "source": [
    "# Etapa 07 ‚Äî Predi√ß√£o e Deploy\n",
    "\n",
    "Este notebook faz parte da fase **final do pipeline de Machine Learning**, em que o modelo j√° treinado √© utilizado para gerar **previs√µes em novos dados** e preparar a **integra√ß√£o com o ambiente de deploy (Streamlit)**.\n",
    "\n",
    "---\n",
    "\n",
    "### üìã Objetivos\n",
    "\n",
    "1. Carregar o modelo salvo (`.joblib`);\n",
    "2. Importar ou simular novos dados;\n",
    "3. Gerar previs√µes (e probabilidades, se classifica√ß√£o);\n",
    "4. Visualizar o desempenho (Real vs Previsto);\n",
    "5. Salvar as predi√ß√µes em CSV;\n",
    "6. Exportar um *template* para deploy via **Streamlit**."
   ]
  },
  {
   "cell_type": "markdown",
   "id": "ad667e9e-42c7-4fae-9c93-2f46059dbdc6",
   "metadata": {},
   "source": [
    "## Etapa 1 ‚Äî Importa√ß√£o das bibliotecas\n",
    "\n",
    "Nesta etapa importamos todas as depend√™ncias necess√°rias:\n",
    "- `joblib` para carregar o modelo treinado;\n",
    "- `numpy` e `pandas` para manipula√ß√£o de dados;\n",
    "- `matplotlib` para visualiza√ß√£o;\n",
    "- `pathlib` para manipula√ß√£o segura de caminhos;\n",
    "- `warnings` para ignorar alertas visuais.\n",
    "\n",
    "A ideia √© garantir que o ambiente tenha todas as bibliotecas padr√£o de um projeto de ML em Python."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "id": "bc627c98",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Imports OK\n"
     ]
    }
   ],
   "source": [
    "import joblib\n",
    "import warnings\n",
    "import numpy as np\n",
    "import pandas as pd\n",
    "import matplotlib.pyplot as plt\n",
    "\n",
    "from pathlib import Path\n",
    "from datetime import datetime\n",
    "\n",
    "from __future__ import annotations\n",
    "\n",
    "warnings.filterwarnings(\"ignore\")\n",
    "\n",
    "plt.rcParams.update({\n",
    "    \"figure.figsize\": (8, 5),\n",
    "    \"figure.dpi\": 120,\n",
    "})\n",
    "print(\"Imports OK\")\n"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "99321511-5f52-4bac-bbbc-f4a20d3e981e",
   "metadata": {},
   "source": [
    "## Etapa 2 ‚Äî Configura√ß√£o de caminhos e par√¢metros\n",
    "\n",
    "Aqui definimos:\n",
    "\n",
    "- O **nome do modelo** `.joblib`;\n",
    "- Os **diret√≥rios de busca** (`SEARCH_DIRS`) onde o notebook vai procurar o modelo;\n",
    "- O **nome da vari√°vel alvo** (`TARGET`);\n",
    "- O **n√∫mero de amostras sint√©ticas** (caso n√£o haja novos dados reais);\n",
    "- E o **diret√≥rio de sa√≠da (`OUTPUT_DIR`)** onde as predi√ß√µes ser√£o salvas.\n",
    "\n",
    "Essas vari√°veis s√£o o ponto central para personalizar o notebook conforme o seu projeto."
   ]
  },
  {
   "cell_type": "markdown",
   "id": "401e9d27-0365-40df-8860-e7238ebb348a",
   "metadata": {},
   "source": [
    "### Localizando o modelo `.joblib`\n",
    "\n",
    "A fun√ß√£o `find_latest_joblib()` faz uma varredura nos diret√≥rios definidos em `SEARCH_DIRS` procurando por arquivos `.joblib`.\n",
    "\n",
    "Ela retorna:\n",
    "- O arquivo que **corresponde ao nome padr√£o (`DEFAULT_MODEL_NAME`)**, se existir;\n",
    "- Caso contr√°rio, o **modelo mais recente** encontrado com base na data de modifica√ß√£o.\n",
    "\n",
    "Isso permite reaproveitar o mesmo notebook mesmo que o modelo tenha sido reexportado recentemente."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "id": "cb2b98b9",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Modelo detectado: /home/rusch/√Årea de trabalho/Projeto_Whirpool/Data_Science_Projects/eda/models/model_RF_cost_per_unit_imp_20251113_122506.joblib\n"
     ]
    }
   ],
   "source": [
    "# Alterar conforme seu projeto\n",
    "DEFAULT_MODEL_NAME = \"model_RF_cost_per_unit_imp_20251113_122506.joblib\"  # <- substitua se necess√°rio\n",
    "SEARCH_DIRS = [Path(\"/home/rusch/√Årea de trabalho/Projeto_Whirpool/Data_Science_Projects/eda/models\")]\n",
    "\n",
    "TARGET = \"cost_per_unit_imp\"  # deixar como None se n√£o houver alvo nos dados novos\n",
    "N_SAMPLES_SYNTHETIC = 100  # linhas dos dados simulados\n",
    "\n",
    "# Onde salvar as predi√ß√µes\n",
    "OUTPUT_DIR = Path(\"/home/rusch/√Årea de trabalho/Projeto_Whirpool/Data_Science_Projects/deploy\")\n",
    "OUTPUT_DIR.mkdir(parents=True, exist_ok=True)\n",
    "\n",
    "def find_latest_joblib(search_dirs, default_hint=None):\n",
    "    candidates = []\n",
    "    for d in search_dirs:\n",
    "        if not d.exists():\n",
    "            continue\n",
    "        candidates += list(d.rglob(\"*.joblib\"))\n",
    "    if default_hint:\n",
    "        for p in candidates:\n",
    "            if p.name == default_hint:\n",
    "                return p\n",
    "    if candidates:\n",
    "        return max(candidates, key=lambda p: p.stat().st_mtime)\n",
    "    return None\n",
    "\n",
    "model_path = find_latest_joblib(SEARCH_DIRS, DEFAULT_MODEL_NAME)\n",
    "print(f\"Modelo detectado: {model_path if model_path else 'N√ÉO ENCONTRADO'}\")"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "7a0eba2b-3fd2-4ef3-b14f-3f9696e993ed",
   "metadata": {},
   "source": [
    "## Etapa 3 ‚Äî Carregando o modelo treinado\n",
    "\n",
    "Aqui o modelo √© carregado com `joblib.load()`.\n",
    "\n",
    "Al√©m disso:\n",
    "- Verificamos o tipo do modelo (`RandomForestRegressor`, `Pipeline`, etc.);\n",
    "- Tentamos detectar as **features originais** (`feature_names_in_`);\n",
    "- Se o modelo n√£o possuir essa informa√ß√£o, o notebook tenta ler uma lista de colunas salvas em `data/gold/X_columns.json`.\n",
    "\n",
    "Isso garante consist√™ncia entre o treino e as novas previs√µes."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "id": "52a0d0dd",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Modelo carregado: Pipeline\n",
      "feature_names_in_: OK\n"
     ]
    }
   ],
   "source": [
    "if model_path is None or not model_path.exists():\n",
    "    raise FileNotFoundError(\n",
    "        \"Arquivo .joblib n√£o encontrado. Atualize DEFAULT_MODEL_NAME ou aponte SEARCH_DIRS corretamente.\"\n",
    "    )\n",
    "\n",
    "model = joblib.load(model_path)\n",
    "print(\"Modelo carregado:\", type(model).__name__)\n",
    "\n",
    "# Tentativa de descobrir as colunas usadas no treino\n",
    "feature_names = getattr(model, \"feature_names_in_\", None)\n",
    "\n",
    "# Alguns usu√°rios salvam X_columns separadamente; tentamos buscar padr√£o comum\n",
    "xcols_sidecar = None\n",
    "for guess in [\"X_columns.json\", \"train_X_columns.json\", \"features.json\"]:\n",
    "    gpath = Path(\"data/gold\")/guess\n",
    "    if gpath.exists():\n",
    "        xcols_sidecar = gpath\n",
    "        break\n",
    "\n",
    "if feature_names is None and xcols_sidecar:\n",
    "    try:\n",
    "        feature_names = pd.Index(pd.read_json(xcols_sidecar, typ=\"series\"))\n",
    "    except Exception:\n",
    "        try:\n",
    "            feature_names = pd.Index(json.loads(Path(xcols_sidecar).read_text()))\n",
    "        except Exception:\n",
    "            feature_names = None\n",
    "\n",
    "print(\"feature_names_in_:\", \"OK\" if feature_names is not None else \"indispon√≠vel\")"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "c46dd90f-5108-4b20-aa43-f14cdd3233c9",
   "metadata": {},
   "source": [
    "## Etapa 4 ‚Äî Carregando ou simulando os novos dados\n",
    "\n",
    "O c√≥digo tenta encontrar automaticamente uma base em `*/data/gold`:\n",
    "- Se existir algum `.csv` ou `.parquet`, ela √© usada como base de previs√£o;\n",
    "- Caso contr√°rio, √© gerado um *dataset sint√©tico* com as mesmas colunas do modelo.\n",
    "\n",
    "> Isso √© √∫til para testar o pipeline de deploy mesmo antes de receber dados reais."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "id": "9739d4a7",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Base real detectada: /home/rusch/√Årea de trabalho/Projeto_Whirpool/Data_Science_Projects/eda/data/gold/kpi_consolidated_outliers_treated.csv\n",
      "Dados reais carregados: (603, 29)\n",
      "Preview das colunas usadas: ['date_key', 'y', 'm', 'site_code', 'kwh_per_unit_imp', 'fx_effect_ratio_imp', 'cost_per_unit_imp_lag1', 'cost_per_unit_imp_roll3']\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>date_key</th>\n",
       "      <th>y</th>\n",
       "      <th>m</th>\n",
       "      <th>site_code</th>\n",
       "      <th>kwh_per_unit_imp</th>\n",
       "      <th>fx_effect_ratio_imp</th>\n",
       "      <th>cost_per_unit_imp_lag1</th>\n",
       "      <th>cost_per_unit_imp_roll3</th>\n",
       "      <th>kwh_per_unit_imp_lag1</th>\n",
       "      <th>kwh_per_unit_imp_roll3</th>\n",
       "      <th>...</th>\n",
       "      <th>kwh_per_unit_imp_z</th>\n",
       "      <th>kwh_per_unit_imp_is_outlier</th>\n",
       "      <th>fx_effect_ratio_imp_mean</th>\n",
       "      <th>fx_effect_ratio_imp_std</th>\n",
       "      <th>fx_effect_ratio_imp_z</th>\n",
       "      <th>fx_effect_ratio_imp_is_outlier</th>\n",
       "      <th>fx_effect_ratio_imp_cap</th>\n",
       "      <th>cost_per_unit_imp_robust</th>\n",
       "      <th>kwh_per_unit_imp_robust</th>\n",
       "      <th>fx_effect_ratio_imp_robust</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>20240101</td>\n",
       "      <td>2024</td>\n",
       "      <td>1</td>\n",
       "      <td>SC01</td>\n",
       "      <td>0.526513</td>\n",
       "      <td>-3.708762e-08</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>False</td>\n",
       "      <td>2.718013e-06</td>\n",
       "      <td>3.896301e-06</td>\n",
       "      <td>-0.707107</td>\n",
       "      <td>False</td>\n",
       "      <td>-3.708762e-08</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>-0.591246</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>20240201</td>\n",
       "      <td>2024</td>\n",
       "      <td>2</td>\n",
       "      <td>SC01</td>\n",
       "      <td>0.526513</td>\n",
       "      <td>1.029906e-07</td>\n",
       "      <td>777.922403</td>\n",
       "      <td>777.922403</td>\n",
       "      <td>0.526513</td>\n",
       "      <td>0.526513</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>False</td>\n",
       "      <td>-1.263414e-06</td>\n",
       "      <td>1.932388e-06</td>\n",
       "      <td>0.707107</td>\n",
       "      <td>False</td>\n",
       "      <td>1.029906e-07</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>-0.545836</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>20240301</td>\n",
       "      <td>2024</td>\n",
       "      <td>3</td>\n",
       "      <td>SC01</td>\n",
       "      <td>0.526513</td>\n",
       "      <td>-5.269614e-06</td>\n",
       "      <td>777.922403</td>\n",
       "      <td>777.922403</td>\n",
       "      <td>0.526513</td>\n",
       "      <td>0.526513</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>False</td>\n",
       "      <td>-4.214648e-06</td>\n",
       "      <td>1.491947e-06</td>\n",
       "      <td>-0.707107</td>\n",
       "      <td>False</td>\n",
       "      <td>-5.269614e-06</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>-2.287501</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>20240401</td>\n",
       "      <td>2024</td>\n",
       "      <td>4</td>\n",
       "      <td>SC01</td>\n",
       "      <td>0.521236</td>\n",
       "      <td>8.005353e-06</td>\n",
       "      <td>777.922403</td>\n",
       "      <td>785.319145</td>\n",
       "      <td>0.526513</td>\n",
       "      <td>0.524754</td>\n",
       "      <td>...</td>\n",
       "      <td>0.162570</td>\n",
       "      <td>False</td>\n",
       "      <td>7.040908e-06</td>\n",
       "      <td>2.490187e-07</td>\n",
       "      <td>3.872983</td>\n",
       "      <td>True</td>\n",
       "      <td>7.040908e-06</td>\n",
       "      <td>0.260542</td>\n",
       "      <td>-0.147398</td>\n",
       "      <td>2.015913</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>20240501</td>\n",
       "      <td>2024</td>\n",
       "      <td>5</td>\n",
       "      <td>SC01</td>\n",
       "      <td>0.525543</td>\n",
       "      <td>1.157692e-06</td>\n",
       "      <td>800.112631</td>\n",
       "      <td>758.418232</td>\n",
       "      <td>0.521236</td>\n",
       "      <td>0.524430</td>\n",
       "      <td>...</td>\n",
       "      <td>0.303185</td>\n",
       "      <td>False</td>\n",
       "      <td>6.740607e-07</td>\n",
       "      <td>1.228424e-07</td>\n",
       "      <td>3.937004</td>\n",
       "      <td>True</td>\n",
       "      <td>1.157692e-06</td>\n",
       "      <td>-0.947556</td>\n",
       "      <td>-0.027105</td>\n",
       "      <td>-0.203928</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows √ó 28 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "   date_key     y  m site_code  kwh_per_unit_imp  fx_effect_ratio_imp  \\\n",
       "0  20240101  2024  1      SC01          0.526513        -3.708762e-08   \n",
       "1  20240201  2024  2      SC01          0.526513         1.029906e-07   \n",
       "2  20240301  2024  3      SC01          0.526513        -5.269614e-06   \n",
       "3  20240401  2024  4      SC01          0.521236         8.005353e-06   \n",
       "4  20240501  2024  5      SC01          0.525543         1.157692e-06   \n",
       "\n",
       "   cost_per_unit_imp_lag1  cost_per_unit_imp_roll3  kwh_per_unit_imp_lag1  \\\n",
       "0                     NaN                      NaN                    NaN   \n",
       "1              777.922403               777.922403               0.526513   \n",
       "2              777.922403               777.922403               0.526513   \n",
       "3              777.922403               785.319145               0.526513   \n",
       "4              800.112631               758.418232               0.521236   \n",
       "\n",
       "   kwh_per_unit_imp_roll3  ...  kwh_per_unit_imp_z  \\\n",
       "0                     NaN  ...                 NaN   \n",
       "1                0.526513  ...                 NaN   \n",
       "2                0.526513  ...                 NaN   \n",
       "3                0.524754  ...            0.162570   \n",
       "4                0.524430  ...            0.303185   \n",
       "\n",
       "   kwh_per_unit_imp_is_outlier  fx_effect_ratio_imp_mean  \\\n",
       "0                        False              2.718013e-06   \n",
       "1                        False             -1.263414e-06   \n",
       "2                        False             -4.214648e-06   \n",
       "3                        False              7.040908e-06   \n",
       "4                        False              6.740607e-07   \n",
       "\n",
       "   fx_effect_ratio_imp_std  fx_effect_ratio_imp_z  \\\n",
       "0             3.896301e-06              -0.707107   \n",
       "1             1.932388e-06               0.707107   \n",
       "2             1.491947e-06              -0.707107   \n",
       "3             2.490187e-07               3.872983   \n",
       "4             1.228424e-07               3.937004   \n",
       "\n",
       "   fx_effect_ratio_imp_is_outlier  fx_effect_ratio_imp_cap  \\\n",
       "0                           False            -3.708762e-08   \n",
       "1                           False             1.029906e-07   \n",
       "2                           False            -5.269614e-06   \n",
       "3                            True             7.040908e-06   \n",
       "4                            True             1.157692e-06   \n",
       "\n",
       "   cost_per_unit_imp_robust  kwh_per_unit_imp_robust  \\\n",
       "0                  0.000000                 0.000000   \n",
       "1                  0.000000                 0.000000   \n",
       "2                  0.000000                 0.000000   \n",
       "3                  0.260542                -0.147398   \n",
       "4                 -0.947556                -0.027105   \n",
       "\n",
       "   fx_effect_ratio_imp_robust  \n",
       "0                   -0.591246  \n",
       "1                   -0.545836  \n",
       "2                   -2.287501  \n",
       "3                    2.015913  \n",
       "4                   -0.203928  \n",
       "\n",
       "[5 rows x 28 columns]"
      ]
     },
     "execution_count": 4,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Tenta detectar um CSV/Parquet real em data/gold para usar como base; caso contr√°rio, gere dados sint√©ticos\n",
    "def try_find_real_data():\n",
    "    candidates = []\n",
    "    for ext in (\"*.csv\", \"*.parquet\"):\n",
    "        candidates += list(Path(\"/home/rusch/√Årea de trabalho/Projeto_Whirpool/Data_Science_Projects/eda/data/gold\").glob(ext))\n",
    "    # Evita arquivos de predi√ß√µes anteriores\n",
    "    candidates = [p for p in candidates if \"predictions_\" not in p.name.lower()]\n",
    "    if candidates:\n",
    "        # Escolhe o mais recente\n",
    "        return max(candidates, key=lambda p: p.stat().st_mtime)\n",
    "    return None\n",
    "\n",
    "real_data_path = try_find_real_data()\n",
    "print(\"Base real detectada:\", real_data_path if real_data_path else \"nenhuma (usaremos dados sint√©ticos)\")\n",
    "\n",
    "\n",
    "def make_synthetic_df(columns: list[str] | None, n_samples=100, seed=42):\n",
    "    rng = np.random.default_rng(seed)\n",
    "    if columns is None:\n",
    "        # fallback: cria 10 colunas num√©ricas gen√©ricas\n",
    "        columns = [f\"feature_{i}\" for i in range(10)]\n",
    "    data = {}\n",
    "    for c in columns:\n",
    "        # Normal(0,1) como default; voc√™ pode adaptar para faixas realistas\n",
    "        data[c] = rng.normal(loc=0.0, scale=1.0, size=n_samples)\n",
    "    df_syn = pd.DataFrame(data)\n",
    "    return df_syn\n",
    "\n",
    "if real_data_path is not None:\n",
    "    if real_data_path.suffix.lower() == \".csv\":\n",
    "        df_new = pd.read_csv(real_data_path)\n",
    "    else:\n",
    "        df_new = pd.read_parquet(real_data_path)\n",
    "    print(\"Dados reais carregados:\", df_new.shape)\n",
    "else:\n",
    "    cols = list(feature_names) if feature_names is not None else None\n",
    "    df_new = make_synthetic_df(cols, n_samples=N_SAMPLES_SYNTHETIC)\n",
    "    print(\"Dados sint√©ticos gerados:\", df_new.shape)\n",
    "\n",
    "# Se a coluna TARGET existir, separamos y_true\n",
    "y_true = None\n",
    "if TARGET and TARGET in df_new.columns:\n",
    "    y_true = df_new[TARGET].copy()\n",
    "    X_new = df_new.drop(columns=[TARGET]).copy()\n",
    "else:\n",
    "    X_new = df_new.copy()\n",
    "\n",
    "display_cols = list(X_new.columns)[:8]\n",
    "print(\"Preview das colunas usadas:\", display_cols)\n",
    "X_new.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "910123f3-9a50-4b82-ba80-1a0869346362",
   "metadata": {},
   "source": [
    "## Etapa 5 ‚Äî Gera√ß√£o das previs√µes\n",
    "\n",
    "Usamos `model.predict()` para gerar as predi√ß√µes em `X_new`.\n",
    "\n",
    "A c√©lula tamb√©m:\n",
    "- Detecta se o modelo √© de **classifica√ß√£o** (`predict_proba`);\n",
    "- Cria novas colunas com as **probabilidades de cada classe**;\n",
    "- Se houver coluna real (`y_true`), junta para compara√ß√£o.\n",
    "\n",
    "O resultado √© um DataFrame `pred_df` com colunas de entrada, `prediction` e, opcionalmente, `y_true`."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "id": "b56316c8",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Previs√µes geradas: (603,)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>date_key</th>\n",
       "      <th>y</th>\n",
       "      <th>m</th>\n",
       "      <th>site_code</th>\n",
       "      <th>kwh_per_unit_imp</th>\n",
       "      <th>fx_effect_ratio_imp</th>\n",
       "      <th>cost_per_unit_imp_lag1</th>\n",
       "      <th>cost_per_unit_imp_roll3</th>\n",
       "      <th>kwh_per_unit_imp_lag1</th>\n",
       "      <th>kwh_per_unit_imp_roll3</th>\n",
       "      <th>...</th>\n",
       "      <th>fx_effect_ratio_imp_mean</th>\n",
       "      <th>fx_effect_ratio_imp_std</th>\n",
       "      <th>fx_effect_ratio_imp_z</th>\n",
       "      <th>fx_effect_ratio_imp_is_outlier</th>\n",
       "      <th>fx_effect_ratio_imp_cap</th>\n",
       "      <th>cost_per_unit_imp_robust</th>\n",
       "      <th>kwh_per_unit_imp_robust</th>\n",
       "      <th>fx_effect_ratio_imp_robust</th>\n",
       "      <th>prediction</th>\n",
       "      <th>y_true</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>20240101</td>\n",
       "      <td>2024</td>\n",
       "      <td>1</td>\n",
       "      <td>SC01</td>\n",
       "      <td>0.526513</td>\n",
       "      <td>-3.708762e-08</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>2.718013e-06</td>\n",
       "      <td>3.896301e-06</td>\n",
       "      <td>-0.707107</td>\n",
       "      <td>False</td>\n",
       "      <td>-3.708762e-08</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>-0.591246</td>\n",
       "      <td>759.848949</td>\n",
       "      <td>777.922403</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>20240201</td>\n",
       "      <td>2024</td>\n",
       "      <td>2</td>\n",
       "      <td>SC01</td>\n",
       "      <td>0.526513</td>\n",
       "      <td>1.029906e-07</td>\n",
       "      <td>777.922403</td>\n",
       "      <td>777.922403</td>\n",
       "      <td>0.526513</td>\n",
       "      <td>0.526513</td>\n",
       "      <td>...</td>\n",
       "      <td>-1.263414e-06</td>\n",
       "      <td>1.932388e-06</td>\n",
       "      <td>0.707107</td>\n",
       "      <td>False</td>\n",
       "      <td>1.029906e-07</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>-0.545836</td>\n",
       "      <td>777.800241</td>\n",
       "      <td>777.922403</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>20240301</td>\n",
       "      <td>2024</td>\n",
       "      <td>3</td>\n",
       "      <td>SC01</td>\n",
       "      <td>0.526513</td>\n",
       "      <td>-5.269614e-06</td>\n",
       "      <td>777.922403</td>\n",
       "      <td>777.922403</td>\n",
       "      <td>0.526513</td>\n",
       "      <td>0.526513</td>\n",
       "      <td>...</td>\n",
       "      <td>-4.214648e-06</td>\n",
       "      <td>1.491947e-06</td>\n",
       "      <td>-0.707107</td>\n",
       "      <td>False</td>\n",
       "      <td>-5.269614e-06</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>-2.287501</td>\n",
       "      <td>777.801135</td>\n",
       "      <td>777.922403</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>20240401</td>\n",
       "      <td>2024</td>\n",
       "      <td>4</td>\n",
       "      <td>SC01</td>\n",
       "      <td>0.521236</td>\n",
       "      <td>8.005353e-06</td>\n",
       "      <td>777.922403</td>\n",
       "      <td>785.319145</td>\n",
       "      <td>0.526513</td>\n",
       "      <td>0.524754</td>\n",
       "      <td>...</td>\n",
       "      <td>7.040908e-06</td>\n",
       "      <td>2.490187e-07</td>\n",
       "      <td>3.872983</td>\n",
       "      <td>True</td>\n",
       "      <td>7.040908e-06</td>\n",
       "      <td>0.260542</td>\n",
       "      <td>-0.147398</td>\n",
       "      <td>2.015913</td>\n",
       "      <td>799.980082</td>\n",
       "      <td>800.112631</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>20240501</td>\n",
       "      <td>2024</td>\n",
       "      <td>5</td>\n",
       "      <td>SC01</td>\n",
       "      <td>0.525543</td>\n",
       "      <td>1.157692e-06</td>\n",
       "      <td>800.112631</td>\n",
       "      <td>758.418232</td>\n",
       "      <td>0.521236</td>\n",
       "      <td>0.524430</td>\n",
       "      <td>...</td>\n",
       "      <td>6.740607e-07</td>\n",
       "      <td>1.228424e-07</td>\n",
       "      <td>3.937004</td>\n",
       "      <td>True</td>\n",
       "      <td>1.157692e-06</td>\n",
       "      <td>-0.947556</td>\n",
       "      <td>-0.027105</td>\n",
       "      <td>-0.203928</td>\n",
       "      <td>698.472842</td>\n",
       "      <td>697.219664</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows √ó 30 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "   date_key     y  m site_code  kwh_per_unit_imp  fx_effect_ratio_imp  \\\n",
       "0  20240101  2024  1      SC01          0.526513        -3.708762e-08   \n",
       "1  20240201  2024  2      SC01          0.526513         1.029906e-07   \n",
       "2  20240301  2024  3      SC01          0.526513        -5.269614e-06   \n",
       "3  20240401  2024  4      SC01          0.521236         8.005353e-06   \n",
       "4  20240501  2024  5      SC01          0.525543         1.157692e-06   \n",
       "\n",
       "   cost_per_unit_imp_lag1  cost_per_unit_imp_roll3  kwh_per_unit_imp_lag1  \\\n",
       "0                     NaN                      NaN                    NaN   \n",
       "1              777.922403               777.922403               0.526513   \n",
       "2              777.922403               777.922403               0.526513   \n",
       "3              777.922403               785.319145               0.526513   \n",
       "4              800.112631               758.418232               0.521236   \n",
       "\n",
       "   kwh_per_unit_imp_roll3  ...  fx_effect_ratio_imp_mean  \\\n",
       "0                     NaN  ...              2.718013e-06   \n",
       "1                0.526513  ...             -1.263414e-06   \n",
       "2                0.526513  ...             -4.214648e-06   \n",
       "3                0.524754  ...              7.040908e-06   \n",
       "4                0.524430  ...              6.740607e-07   \n",
       "\n",
       "   fx_effect_ratio_imp_std  fx_effect_ratio_imp_z  \\\n",
       "0             3.896301e-06              -0.707107   \n",
       "1             1.932388e-06               0.707107   \n",
       "2             1.491947e-06              -0.707107   \n",
       "3             2.490187e-07               3.872983   \n",
       "4             1.228424e-07               3.937004   \n",
       "\n",
       "   fx_effect_ratio_imp_is_outlier  fx_effect_ratio_imp_cap  \\\n",
       "0                           False            -3.708762e-08   \n",
       "1                           False             1.029906e-07   \n",
       "2                           False            -5.269614e-06   \n",
       "3                            True             7.040908e-06   \n",
       "4                            True             1.157692e-06   \n",
       "\n",
       "   cost_per_unit_imp_robust  kwh_per_unit_imp_robust  \\\n",
       "0                  0.000000                 0.000000   \n",
       "1                  0.000000                 0.000000   \n",
       "2                  0.000000                 0.000000   \n",
       "3                  0.260542                -0.147398   \n",
       "4                 -0.947556                -0.027105   \n",
       "\n",
       "   fx_effect_ratio_imp_robust  prediction      y_true  \n",
       "0                   -0.591246  759.848949  777.922403  \n",
       "1                   -0.545836  777.800241  777.922403  \n",
       "2                   -2.287501  777.801135  777.922403  \n",
       "3                    2.015913  799.980082  800.112631  \n",
       "4                   -0.203928  698.472842  697.219664  \n",
       "\n",
       "[5 rows x 30 columns]"
      ]
     },
     "execution_count": 5,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Faz as previs√µes\n",
    "y_pred = None\n",
    "try:\n",
    "    y_pred = model.predict(X_new)\n",
    "    print(\"Previs√µes geradas:\", y_pred.shape)\n",
    "except Exception as e:\n",
    "    raise RuntimeError(f\"Falha ao prever. Verifique se as colunas/ordem/dtypes batem com o treino. Detalhe: {e}\")\n",
    "\n",
    "pred_df = X_new.copy()\n",
    "pred_df[\"prediction\"] = y_pred\n",
    "\n",
    "# Se for classificador e existir predict_proba, adiciona probabilidades\n",
    "has_proba = hasattr(model, \"predict_proba\")\n",
    "if has_proba:\n",
    "    try:\n",
    "        proba = model.predict_proba(X_new)\n",
    "        if proba.ndim == 2:\n",
    "            for i in range(proba.shape[1]):\n",
    "                pred_df[f\"proba_{i}\"] = proba[:, i]\n",
    "        print(\"Probabilidades adicionadas (classifica√ß√£o).\")\n",
    "    except Exception:\n",
    "        pass\n",
    "\n",
    "# Se houver y_true, junta para avalia√ß√£o/plot\n",
    "if y_true is not None:\n",
    "    pred_df[\"y_true\"] = y_true.values\n",
    "\n",
    "pred_df.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "12c8be6e-aa05-45e9-bdef-847b1fbc6199",
   "metadata": {},
   "source": [
    "O c√≥digo come√ßa executando a etapa de previs√£o propriamente dita com o modelo j√° treinado. Ele inicializa a vari√°vel y_pred como None e, em seguida, entra em um bloco try/except. Dentro do try, chama model.predict(X_new), isto √©, pede para o modelo gerar previs√µes a partir do novo conjunto de dados X_new. O resultado √© armazenado em y_pred e, se tudo correr bem, o c√≥digo imprime o formato do vetor de previs√µes por meio de y_pred.shape, apenas como confirma√ß√£o de que a sa√≠da tem o tamanho esperado.\n",
    "\n",
    "Se ocorrer algum erro nessa chamada ‚Äî por exemplo, se X_new n√£o tiver as mesmas colunas, ordem ou tipos (dtypes) usados no treino ‚Äî o bloco except captura a exce√ß√£o e lan√ßa um RuntimeError com uma mensagem mais amig√°vel:\n",
    "\n",
    "> ‚ÄúFalha ao prever. Verifique se as colunas/ordem/dtypes batem com o treino.‚Äù\n",
    "\n",
    "Ao incluir o detalhe da exce√ß√£o original ({e}), o c√≥digo ajuda a diagnosticar rapidamente o problema.\n",
    "\n",
    "Em seguida, o c√≥digo cria um DataFrame de resultados chamado pred_df, come√ßando com uma c√≥pia de X_new. Ao fazer pred_df = X_new.copy(), ele preserva as features originais que foram usadas para infer√™ncia. Logo depois, adiciona uma nova coluna chamada \"prediction\" contendo os valores de y_pred. Dessa forma, cada linha de pred_df passa a combinar as features de entrada com a previs√£o correspondente produzida pelo modelo.\n",
    "\n",
    "Na pr√≥xima etapa, o c√≥digo trata do caso em que o modelo √© um classificador. Ele verifica se o objeto model possui o m√©todo predict_proba por meio de hasattr(model, \"predict_proba\"). Se esse atributo existir, entende-se que o modelo consegue retornar probabilidades associadas √†s classes. Nesse caso, dentro de outro bloco try, o c√≥digo chama model.predict_proba(X_new), obtendo uma matriz proba em que cada coluna representa a probabilidade estimada para uma classe diferente. Se essa matriz tiver duas dimens√µes (proba.ndim == 2), o c√≥digo percorre as colunas com um for i in range(proba.shape[1]) e, para cada classe, cria uma nova coluna em pred_df com o nome f\"proba_{i}\", armazenando as probabilidades da classe i. Ao final, imprime uma mensagem informando que as probabilidades foram adicionadas, indicando que se trata de um problema de classifica√ß√£o. Se algo der errado nessa etapa de probabilidade, o except interno simplesmente ignora o erro, sem interromper o fluxo principal.\n",
    "\n",
    "Por fim, o c√≥digo verifica se existe um vetor de valores reais y_true. Se y_true n√£o for None, ele adiciona essa informa√ß√£o ao DataFrame de resultados com pred_df[\"y_true\"] = y_true.values. Isso permite comparar diretamente, linha a linha, o valor verdadeiro (y_true) e a previs√£o do modelo (prediction), o que √© √∫til tanto para avalia√ß√£o quantitativa quanto para gera√ß√£o de gr√°ficos.\n",
    "\n",
    "A √∫ltima linha, pred_df.head(), retorna (ou exibe, dependendo do ambiente) as primeiras linhas do DataFrame de resultados, mostrando um ‚Äúpreview‚Äù das observa√ß√µes, suas features, a previs√£o do modelo, eventuais probabilidades (no caso de classifica√ß√£o) e, quando dispon√≠vel, o valor real da vari√°vel alvo."
   ]
  },
  {
   "cell_type": "markdown",
   "id": "6b03892d-ff0e-4600-8153-e6cf7c86473b",
   "metadata": {},
   "source": [
    "## Etapa 6 ‚Äî Visualiza√ß√£o: Real vs. Previsto\n",
    "\n",
    "Se houver valores reais (`y_true`), o notebook gera automaticamente um gr√°fico de dispers√£o **Real vs. Previsto**.\n",
    "\n",
    "Esse gr√°fico √© uma forma r√°pida de inspecionar a **performance qualitativa** do modelo:\n",
    "- Quanto mais os pontos se aproximam da linha `y = x`, melhor o ajuste."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "id": "526c1343",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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0KFa9X799ddr9uzZeu2113T77be76zUFhMGDB6t9+/Z69NFHtW3bNo0aNUoDBgxQ7969awx052v9+vVav369JLmfM7rllls0Y8YMdejQocrY6OhoRUREVNvG+XzWkydP1urVq/Xaa6/p8ccflyR3kGzdurVGjRp12r6DgoI0ZswYffDBB+rdu7cmTZqkgQMHql+/fvLz8zunz2Dbtm2SKoPdL3Xv3l1RUVHat2+f8vPzFRISck7bBgBPIiwBQAtj/Pg8TXFxsTZu3Kg//elPuuWWW9SpU6cqX3Zzc3MlSU888cRpt3fixAn373/zm98oKSlJnTt31rhx4xQZGSmbzSZJevrpp2v9oH9UVJSGDRum1atXa8eOHerRo4eys7P18ccfq3fv3rrgggvcY4OCgrRp0ybNnTtX77//vvuqVnh4uG677TbNmjWrTp6hmTt3brWJDk7l51ddfu58PusJEyYoKChIr7/+uh555BF5eXlpxYoVys3N1d13313t6lVN3nzzTT322GP673//655S3sfHR9dcc40WL17sfp7qTAoKCiSpypXJn2vbtq0yMzNVUFBAWALQpHAbHgC0UP7+/ho+fLg++OADOZ1O3XDDDSopKXEvDw4OllT5RdgwjFP+Gjx4sCTpm2++UVJSkoYPH660tDS9+uqreuSRRzRv3jzNmTNH5eXlddL3yatHJ68m/ec//1FFRUWNt51FRUXp5ZdfVnZ2tlJSUvTss88qLCxMDz30kB566KE66edc/HLCh5PO9bOWKm8v/PWvf60jR45o9erVks7+Fryfb2PevHnatWuXMjMz9frrr+uyyy7T66+/rmuuueasj+tk/1lZWTUuP3LkSJVxANBUEJYAoIXr1auXbrzxRh08eFBPPfWUu37JJZdIkr744ouz2k56erokaezYsdWu2GzZskWlpaV10u/EiRPdV1RcLpdee+01WSwW/e53vzvlOiaTST179tQdd9zhDhbLli2rk37qwrl+1iednJnutddeU05OjlauXKlevXqpd+/e59xDhw4d9Pvf/16rVq1St27d9OWXX7qveEmS2WyW0+mscd1f/epXkiqf3/ql9PR0HTx4UDExMVxVAtDkEJYAAJo1a5Z8fHy0ePFi9/uQ/vznP8tqteqee+7Rrl27qq1TXl5e5cv9yXf4/PILc3Z2dpXni2rr5BWVQ4cO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18jJyakyjvMGhmEYO3fuNAYNGmSEhoYa3t7eRteuXY1Zs2YZJ06cqHE8503L1KlTJ0NSjb9+/gLR+jg/srKyjOuvv94IDQ01fHx8jEsuucRYvXp1fR0q6tDZnDfr1q075ZjBgwdX22ZLOG9MhmEYDXklCwAAAACaAp5ZAgAAAIAaEJYAAAAAoAaEJQAAAACoAWEJAAAAAGpAWAIAAACAGhCWAAAAAKAGhCUAAAAAqAFhCQAAAABqQFgCADR7S5culclkcv+yWCxq27atfvvb32r37t31um+TyaR58+bV6z4AAPXD4ukGAABoKK+++qri4uJkt9u1YcMGLVy4UOvWrVNaWppatWrl6fYAAI0MYQkA0GIkJCTowgsvlCQNGTJETqdTc+fO1bJlyzRlyhQPdwcAaGy4DQ8A0GKdDE5Hjx5117755huNHTtWoaGh8vHx0a9+9Su99dZbVdY7duyYbrvtNsXHxysgIEARERG6/PLL9cUXXzRo/wCA+kVYAgC0WPv27ZMkde/eXZK0bt06DRgwQPn5+frHP/6h5cuXq3fv3vrNb36jpUuXutfLy8uTJM2dO1cffvihXn31VXXu3FlDhgzRZ5991tCHAQCoJybDMAxPNwEAQH1aunSppkyZok2bNqlv377uZ5YmT56s7t27a+3atbJYLOrRo4d8fX21ZcsWWSw/3ak+ZswYbd26VQcPHpTZXP3njE6nU4ZhaOTIkQoKCtJ7773nXmYymTR37lwmeQCAJogrSwCAFuOSSy6R1WpVYGCgRo4cqVatWmn58uWyWCxKT09XWlqafv/730uSKioq3L9GjRqlI0eOaOfOne5t/eMf/1CfPn3k4+Mji8Uiq9WqtWvXaseOHZ46PABAHSMsAQBajH/961/6+uuv9emnn+rmm2/Wjh07dN1110n66bml++67T1artcqv2267TZKUk5MjSfrrX/+qW2+9Vf369dO7776rTZs26euvv9bIkSNVWlrqmYMDANQ5ZsMDALQYPXr0cE/qMHToUDmdTr300kt65513lJiYKEl68MEHNXHixBrXj42NlSS9/vrrGjJkiP7+979XWV5UVFSP3QMAGhphCQDQYj3++ON69913NWfOHKWkpKhbt276/vvvtWjRotOuZzKZZLPZqtR++OEHbdy4UR06dKjPlgEADYjb8AAALVarVq304IMPaseOHfrvf/+rF154QWvXrtWVV16pN954Q59//rmWLVumRx55RNdee617vdGjR+uTTz7R3Llz9emnn+rvf/+7rrzySsXExHjwaAAA/9/OHdpKCAZRGL090MVfEF2Q4HEkGDQCQw30QQOUgUOve2rkU7vn+Cngy0zmv9ksAfDThmHItm2Z5zn3fee6rizLknEc8zxPuq5Lay193//NTNOU931zHEfWdU1rLfu+5zxPr8MBvojX4QAAAAVneAAAAAWxBAAAUBBLAAAABbEEAABQEEsAAAAFsQQAAFAQSwAAAAWxBAAAUBBLAAAABbEEAABQEEsAAAAFsQQAAFAQSwAAAAWxBAAAUPgAkM7xE88liQUAAAAASUVORK5CYII=",
      "text/plain": [
       "<Figure size 960x600 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "# Gr√°fico Real vs Previsto (apenas se tivermos y_true)\n",
    "if \"y_true\" in pred_df.columns:\n",
    "    plt.figure()\n",
    "    plt.scatter(pred_df[\"y_true\"], pred_df[\"prediction\"], alpha=0.5, s=15)\n",
    "    plt.xlabel(\"Real\")\n",
    "    plt.ylabel(\"Previsto\")\n",
    "    plt.title(\"Real vs. Previsto\")\n",
    "    # Linha de refer√™ncia y=x\n",
    "    lims = [\n",
    "        min(pred_df[\"y_true\"].min(), pred_df[\"prediction\"].min()),\n",
    "        max(pred_df[\"y_true\"].max(), pred_df[\"prediction\"].max()),\n",
    "    ]\n",
    "    plt.plot(lims, lims)\n",
    "    plt.show()\n",
    "else:\n",
    "    print(\"'y_true' n√£o dispon√≠vel. Pule o gr√°fico Real vs Previsto ou forne√ßa valores reais no dataset.\")"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "0de5d1ff-c550-4852-8771-3801227ddd0a",
   "metadata": {},
   "source": [
    "Esse trecho de c√≥digo constr√≥i e exibe o gr√°fico Real vs. Previsto, e s√≥ faz isso se os valores reais estiverem dispon√≠veis no DataFrame de previs√µes. O c√≥digo come√ßa com uma verifica√ß√£o simples: `if \"y_true\" in pred_df.columns:`. Por meio desse teste, ele verifica se a coluna \"y_true\" existe em pred_df. Essa coluna, como vimos antes, cont√©m os valores reais da vari√°vel alvo. Se ela n√£o existir, n√£o faz sentido comparar real vs previsto, ent√£o o c√≥digo simplesmente exibe uma mensagem orientando o usu√°rio a fornecer valores reais.\n",
    "\n",
    "Quando a coluna \"y_true\" est√° presente, o c√≥digo prossegue para construir o gr√°fico. Ele cria uma nova figura com plt.figure() e plota um diagrama de dispers√£o (scatterplot) usando: `plt.scatter(pred_df[\"y_true\"], pred_df[\"prediction\"], alpha=0.5, s=15)`. No eixo x, v√£o os valores reais (y_true); no eixo y, os valores previstos (prediction). O par√¢metro alpha=0.5 deixa os pontos semitransparentes, o que ajuda a visualizar regi√µes com sobreposi√ß√£o de observa√ß√µes, e s=15 controla o tamanho dos marcadores. Em seguida, os r√≥tulos dos eixos e o t√≠tulo do gr√°fico s√£o definidos como ‚ÄúReal‚Äù (eixo x), ‚ÄúPrevisto‚Äù (eixo y) e ‚ÄúReal vs. Previsto‚Äù.\n",
    "\n",
    "Depois disso, o c√≥digo constr√≥i uma linha de refer√™ncia y = x, que representa o cen√°rio ideal em que previs√£o e valor real s√£o exatamente iguais. Para isso, ele calcula um intervalo de limites chamado `lims`: \n",
    "\n",
    " - `lims = [\n",
    "    min(pred_df[\"y_true\"].min(), pred_df[\"prediction\"].min()),\n",
    "    max(pred_df[\"y_true\"].max(), pred_df[\"prediction\"].max()),\n",
    "    ]`\n",
    "\n",
    "Ou seja, ele pega o menor e o maior valor observados entre real e previsto, garantindo que a linha y = x cubra toda a faixa de dados vis√≠vel no gr√°fico. Em seguida, desenha essa reta com: `plt.plot(lims, lims)`. O resultado √© uma figura cujos pontos (real vs previsto) est√£o espalhados em torno da linha diagonal. **Quanto mais pr√≥ximos os pontos estiverem dessa linha, melhor o desempenho do modelo**. No gr√°fico, observa-se que a nuvem de pontos est√° fortemente concentrada sobre a diagonal, indicando que o modelo reproduz muito bem os valores reais do custo ‚Äî apenas com pequenas dispers√µes em torno da linha, t√≠picas de erros residuais. Por fim, plt.show() exibe o gr√°fico na sa√≠da. Caso a coluna \"y_true\" n√£o esteja dispon√≠vel, o bloco else imprime uma mensagem informando que o gr√°fico foi pulado e que √© necess√°rio fornecer os valores reais para que essa compara√ß√£o visual possa ser feita. "
   ]
  },
  {
   "cell_type": "markdown",
   "id": "19ad168a-738a-4425-8a11-7ee9604a4c25",
   "metadata": {},
   "source": [
    "## Etapa 7 ‚Äî Salvando as predi√ß√µes\n",
    "\n",
    "Ap√≥s gerar as previs√µes, elas s√£o exportadas para um arquivo `.csv` no diret√≥rio definido por `OUTPUT_DIR`.\n",
    "\n",
    "O nome do arquivo inclui um *timestamp* para garantir que cada execu√ß√£o gere uma nova vers√£o, por exemplo:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "id": "9414b783",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Predi√ß√µes salvas em: /home/rusch/√Årea de trabalho/Projeto_Whirpool/Data_Science_Projects/deploy/predictions_20251113_122809.csv\n"
     ]
    }
   ],
   "source": [
    "# Salvar predi√ß√µes\n",
    "ts = datetime.now().strftime(\"%Y%m%d_%H%M%S\")\n",
    "out_csv = Path(\"/home/rusch/√Årea de trabalho/Projeto_Whirpool/Data_Science_Projects/deploy\") / f\"predictions_{ts}.csv\"\n",
    "out_csv.parent.mkdir(parents=True, exist_ok=True)\n",
    "pred_df.to_csv(out_csv, index=False)\n",
    "print(f\"Predi√ß√µes salvas em: {out_csv}\")"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "97011e54",
   "metadata": {},
   "source": [
    "\n",
    "## Template para Streamlit\n",
    "\n",
    "O c√≥digo abaixo (tamb√©m salvo √† parte) √© um template m√≠nimo para criar um dashboard:\n",
    "- Carrega o `.joblib`\n",
    "- Recebe um CSV\n",
    "- Gera predi√ß√µes\n",
    "- (Opcional) Plota **Real vs Previsto** quando a coluna alvo est√° presente\n"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "d3d6a455-35a0-49ed-99e4-8a2cb0a2982e",
   "metadata": {},
   "source": [
    "## Etapa 10 ‚Äî Template para deploy em Streamlit\n",
    "\n",
    "Por fim, o notebook gera automaticamente um arquivo `app_streamlit_template.py`.\n",
    "\n",
    "Esse *template* cria uma interface simples em Streamlit que:\n",
    "- Permite carregar o modelo `.joblib`;\n",
    "- Fazer upload de um novo `.csv`;\n",
    "- Exibir as predi√ß√µes e probabilidades;\n",
    "- Fazer download do resultado;\n",
    "- E, se houver valores reais, plota o gr√°fico **Real vs Previsto**.\n",
    "\n",
    "> Essa etapa √© o ponto de transi√ß√£o entre o modelo offline e o deploy web interativo."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "9315e090",
   "metadata": {},
   "outputs": [],
   "source": [
    "from textwrap import dedent\n",
    "from pathlib import Path\n",
    "\n",
    "DEFAULT_MODEL_NAME = \"model_RF_cost_per_unit_imp_20251105_102326.joblib\"\n",
    "DEFAULT_MODEL_DIR  = Path(\"/home/rusch/√Årea de trabalho/Projeto_Whirpool/Data_Science_Projects/eda/models\")\n",
    "DEFAULT_MODEL_PATH = (DEFAULT_MODEL_DIR / DEFAULT_MODEL_NAME).as_posix()  # string no formato POSIX\n",
    "\n",
    "streamlit_code = dedent(f\"\"\"\n",
    "import streamlit as st\n",
    "import pandas as pd\n",
    "import joblib\n",
    "from pathlib import Path\n",
    "import matplotlib.pyplot as plt\n",
    "\n",
    "st.set_page_config(page_title=\"Predi√ß√µes ‚Äî Template\", page_icon=\"ü§ñ\", layout=\"wide\")\n",
    "\n",
    "st.title(\"Template de Deploy ‚Äî Predi√ß√µes com modelo .joblib\")\n",
    "\n",
    "# ===== Config =====\n",
    "DEFAULT_MODEL_PATH = \"{DEFAULT_MODEL_PATH}\"\n",
    "TARGET = \"cost_per_unit_imp\"  # deixar vazio (\"\") se n√£o houver alvo real\n",
    "\n",
    "# ===== Sidebar =====\n",
    "st.sidebar.header(\"Configura√ß√µes\")\n",
    "model_path = st.sidebar.text_input(\"Caminho do modelo (.joblib)\", value=DEFAULT_MODEL_PATH)\n",
    "uploaded = st.sidebar.file_uploader(\"Suba um CSV com as features\", type=[\"csv\"])\n",
    "show_preview = st.sidebar.checkbox(\"Mostrar preview do CSV\", value=True)\n",
    "\n",
    "# ===== Load model =====\n",
    "@st.cache_resource\n",
    "def load_model(path: str):\n",
    "    return joblib.load(path)\n",
    "\n",
    "try:\n",
    "    model = load_model(model_path)\n",
    "    st.success(f\"Modelo carregado: {{type(model).__name__}}\")\n",
    "except Exception as e:\n",
    "    st.error(f\"Falha ao carregar modelo: {{e}}\")\n",
    "    st.stop()\n",
    "\n",
    "# ===== Data input =====\n",
    "if uploaded is not None:\n",
    "    try:\n",
    "        df = pd.read_csv(uploaded)\n",
    "    except Exception as e:\n",
    "        st.error(f\"Erro ao ler CSV: {{e}}\")\n",
    "        st.stop()\n",
    "else:\n",
    "    st.info(\"Envie um CSV com as *features* para previs√£o.\")\n",
    "    st.stop()\n",
    "\n",
    "if show_preview:\n",
    "    st.subheader(\"Preview\")\n",
    "    st.dataframe(df.head(20))\n",
    "\n",
    "# Se houver TARGET no CSV, separa y_true\n",
    "y_true = None\n",
    "X = df.copy()\n",
    "if TARGET and TARGET in X.columns:\n",
    "    y_true = X[TARGET].copy()\n",
    "    X = X.drop(columns=[TARGET])\n",
    "\n",
    "# ===== Predict =====\n",
    "try:\n",
    "    y_pred = model.predict(X)\n",
    "except Exception as e:\n",
    "    st.error(f\"Falha ao prever. Verifique nomes e ordem das colunas. Detalhe: {{e}}\")\n",
    "    st.stop()\n",
    "\n",
    "pred_df = X.copy()\n",
    "pred_df[\"prediction\"] = y_pred\n",
    "\n",
    "# Probabilidades (se classifica√ß√£o)\n",
    "if hasattr(model, \"predict_proba\"):\n",
    "    try:\n",
    "        proba = model.predict_proba(X)\n",
    "        if proba.ndim == 2:\n",
    "            for i in range(proba.shape[1]):\n",
    "                pred_df[f\"proba_{{i}}\"] = proba[:, i]\n",
    "    except Exception:\n",
    "        pass\n",
    "\n",
    "if y_true is not None:\n",
    "    pred_df[\"y_true\"] = y_true.values\n",
    "\n",
    "st.subheader(\"Resultado das predi√ß√µes\")\n",
    "st.dataframe(pred_df.head(50))\n",
    "\n",
    "# Download CSV\n",
    "@st.cache_data\n",
    "def convert_df_to_csv(df):\n",
    "    return df.to_csv(index=False).encode(\"utf-8\")\n",
    "\n",
    "csv_bytes = convert_df_to_csv(pred_df)\n",
    "st.download_button(\"Baixar predi√ß√µes (CSV)\", data=csv_bytes, file_name=\"predictions.csv\", mime=\"text/csv\")\n",
    "\n",
    "# ===== Plot Real vs Previsto =====\n",
    "if y_true is not None:\n",
    "    st.subheader(\"Gr√°fico ‚Äî Real vs. Previsto\")\n",
    "    fig, ax = plt.subplots()\n",
    "    ax.scatter(pred_df[\"y_true\"], pred_df[\"prediction\"], alpha=0.7)\n",
    "    ax.set_xlabel(\"Real\")\n",
    "    ax.set_ylabel(\"Previsto\")\n",
    "    ax.set_title(\"Real vs. Previsto\")\n",
    "    lims = [\n",
    "        min(pred_df[\"y_true\"].min(), pred_df[\"prediction\"].min()),\n",
    "        max(pred_df[\"y_true\"].max(), pred_df[\"prediction\"].max()),\n",
    "    ]\n",
    "    ax.plot(lims, lims)\n",
    "    st.pyplot(fig)\n",
    "else:\n",
    "    st.info(\"Nenhum valor real detectado no CSV (coluna TARGET). O gr√°fico foi omitido.\")\n",
    "\"\"\")\n",
    "\n",
    "# salva arquivo ao lado do notebook\n",
    "out_dir = Path(\"/home/rusch/√Årea de trabalho/Projeto_Whirpool/Data_Science_Projects/deploy\")\n",
    "out_dir.mkdir(parents=True, exist_ok=True)\n",
    "out_file = out_dir / \"app_streamlit_template.py\"   # nome do arquivo .py\n",
    "out_file.write_text(streamlit_code, encoding=\"utf-8\")\n",
    "print(f\"Streamlit template salvo em: {out_file}\")"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "d0098a80-9fd3-4088-acc3-0d955fcfa5aa",
   "metadata": {},
   "source": [
    "Inicia-se importando duas utilidades auxiliares, `dedent` e `Path`, usadas para manipula√ß√£o de texto multilinha e caminhos de arquivos. Em seguida, define tr√™s constantes relacionadas ao modelo que ser√° carregado no aplicativo Streamlit: o nome padr√£o do arquivo `.joblib` contendo o modelo treinado, o diret√≥rio onde esse modelo est√° salvo e o caminho completo para o modelo em formato `POSIX (DEFAULT_MODEL_PATH)`. Essa etapa prepara as informa√ß√µes necess√°rias para gerar dinamicamente o c√≥digo do aplicativo de deploy.\n",
    "\n",
    "Logo ap√≥s, o c√≥digo constr√≥i uma **string multilinha** contendo todo o script Streamlit, usando `dedent(f\"\"\" ... \"\"\")`. Dentro desse bloco, √© montado o template completo da aplica√ß√£o ‚Äî com leitura do modelo, carregamento do CSV, gera√ß√£o de previs√µes, download do resultado e cria√ß√£o do gr√°fico Real vs Previsto. O uso de `dedent` **remove indenta√ß√£o desnecess√°ria**, e o formato `f-string` permite inserir `DEFAULT_MODEL_PATH` diretamente dentro do c√≥digo Streamlit.\n",
    "\n",
    "Dentro da string, o script Streamlit come√ßa importando bibliotecas necess√°rias: streamlit, pandas, joblib, matplotlib.pyplot e Path. Em seguida, configura a p√°gina com st.set_page_config, definindo t√≠tulo, √≠cone e layout.\n",
    "\n",
    "Logo no in√≠cio da interface, o template exibe um t√≠tulo com st.title(\"Template de Deploy ‚Äî Predi√ß√µes com modelo .joblib\"). Depois define duas vari√°veis principais: `DEFAULT_MODEL_PATH`, que cont√©m o caminho para o modelo joblib, e `TARGET`, que representa **o nome da coluna contendo o valor real** caso o CSV enviado tenha tamb√©m os valores verdadeiros da vari√°vel alvo.\n",
    "\n",
    "Na barra lateral, criada com `st.sidebar`, o c√≥digo define tr√™s elementos de intera√ß√£o: um campo de texto para inserir o caminho do modelo (text_input), um file uploader para carregar um CSV contendo as features de entrada e uma caixa de sele√ß√£o (checkbox) para decidir se um preview do CSV ser√° mostrado.\n",
    "\n",
    "Em seguida, o c√≥digo define a fun√ß√£o `load_model` decorada com `@st.cache_resource`. Esse decorador instrui o Streamlit a armazenar o modelo em cache, evitando recarregar o arquivo `.joblib` a cada altera√ß√£o no aplicativo. Isso melhora o desempenho. Dentro do bloco `try/except`, o script tenta carregar o modelo usando `joblib.load(path)`; se conseguir, exibe uma mensagem de sucesso com `st.success`, caso contr√°rio mostra um erro e interrompe a execu√ß√£o com `st.stop()`.\n",
    "\n",
    "A pr√≥xima parte trata do CSV enviado pelo usu√°rio: se o arquivo estiver presente no `file_uploader`, o c√≥digo tenta ler o arquivo com `pd.read_csv(uploaded)` dentro de outro bloco `try`. Caso haja erro de leitura, o script alerta o usu√°rio com `st.error` e para a execu√ß√£o. Se nenhum arquivo foi carregado, o Streamlit mostra `st.info` pedindo que o usu√°rio envie um CSV e encerra a aplica√ß√£o.\n",
    "\n",
    "Se o preview estiver habilitado (`show_preview=True`), o c√≥digo exibe as primeiras linhas do CSV carregado com `st.dataframe(df.head(20))`.\n",
    "\n",
    "Ap√≥s isso, o c√≥digo prepara os dados para previs√£o. Ele cria `X = df.copy()` e inicializa `y_true = None`. Se a coluna definida em `TARGET` existir no DataFrame enviado, ela √© separada como vetor de valores reais (`y_true`) e removida de X. Isso assegura que somente as features de entrada sejam passadas ao modelo.\n",
    "\n",
    "Na etapa de previs√£o, o c√≥digo entra em um bloco try chamando: `y_pred = model.predict(X)`. Se a estrutura do CSV estiver coerente com o que o modelo espera (mesma ordem de colunas, mesmos dtypes, vari√°veis categ√≥ricas codificadas corretamente), as previs√µes s√£o geradas sem erro. Caso contr√°rio, o bloco except alerta o usu√°rio que h√° inconsist√™ncias nas colunas ou ordem, indicando o erro detalhado.\n",
    "\n",
    "O DataFrame `pred_df` √© criado copiando X e adicionando a coluna \"prediction\" com os valores previstos. Em seguida, caso o modelo possua o m√©todo `predict_proba` ‚Äî **t√≠pico de classificadores** ‚Äî o c√≥digo tenta adicionar ao `pred_df` as probabilidades de cada classe, criando colunas como \"proba_0\", \"proba_1\" e assim por diante.\n",
    "\n",
    "Se valores reais estavam presentes no CSV, o c√≥digo inclui uma coluna \"y_true\" em pred_df, permitindo comparar previs√£o e verdade.O aplicativo ent√£o exibe esse DataFrame com: \n",
    " > st.subheader(\"Resultado das predi√ß√µes\")\n",
    " >\n",
    " > st.dataframe(pred_df.head(50))\n",
    "\n",
    "Em seguida, √© definida a fun√ß√£o convert_df_to_csv, decorada com @st.cache_data, que converte o DataFrame de resultados em bytes CSV para download. O bot√£o: `st.download_button(\"Baixar predi√ß√µes (CSV)\", ...)` permite ao usu√°rio baixar um arquivo predictions.csv contendo todas as previs√µes.\n",
    "\n",
    "Para a visualiza√ß√£o gr√°fica, se `y_true` existir, o c√≥digo monta um gr√°fico Matplotlib de Real vs Previsto. Ele cria a figura com `plt.subplots()`, plota os pontos com ax.scatter(...), rotula eixos e t√≠tulo, e constr√≥i uma linha de refer√™ncia y=x usando os limites m√≠nimos e m√°ximos das duas colunas. O gr√°fico √© exibido dentro do Streamlit com `st.pyplot(fig)`. Caso n√£o haja valores reais no CSV, uma mensagem informativa explica que o gr√°fico n√£o ser√° mostrado.\n",
    "\n",
    "Por fim, fora da string, o c√≥digo salva todo esse template em um arquivo .py dentro do diret√≥rio de deploy. Ele cria o diret√≥rio se necess√°rio com out_dir.mkdir(parents=True, exist_ok=True), monta o caminho out_file e grava o conte√∫do com `out_file.write_text(streamlit_code, encoding=\"utf-8\")`. A mensagem final indica ao usu√°rio onde o script foi salvo."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "d92d3d33-2128-4d5a-a20a-eaccb9615b61",
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python [conda env:base] *",
   "language": "python",
   "name": "conda-base-py"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.13.5"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
